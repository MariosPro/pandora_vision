<launch>

  <!-- ======================= Launchers depended on ======================= -->

  <!--State manager and changer -->
  <include file="$(find state_manager)/launch/stateManager.launch" />


  <!-- =========================== The namespace =========================== -->

  <arg name="namespace" default="pandora_vision/hole_detector" />

  <!-- ========================== Thermal Enable =========================== -->
  <!-- Set both to true if Thermal must be included -->

  <param name="/hole_detector/thermal" value="false" />
  <arg name="open_thermal" default="false" />

  <!-- ========================== Source selection ========================= -->

  <!-- Kinect: choose the openni driver -->
  <arg name="openni" default="false" />

  <group if="$(arg openni)">
    <include file="$(find openni_launch)/launch/openni.launch">
      <arg name="device_id" value="#1" />
      <arg name="camera" value="kinect" />
      <arg name="depth_registration" value="true"/>
    </include>
  </group>


  <!-- Xtion: choose the openni2 driver -->
  <arg name="openni2" default="false" />

  <group if="$(arg openni2)">
    <include file="$(find openni2_launch)/launch/openni2.launch">
      <arg name="device_id" value="#1" />
      <arg name="camera" value="kinect" />
      <arg name="depth_registration" value="true"/>
    </include>
  </group>


  <!-- If the source is not a physical device, it is a bag: play "path" bag -->
  <group unless="$(arg openni)">
    <group unless="$(arg openni2)">

      <arg name="path" default="/home/aggelos/Desktop/pcl_thermal_bags/thermal2.bag" />

      <node pkg="rosbag" type="play" name="player" output="screen" args="--clock -l $(arg path)" >
        <remap from="/camera/depth_registered/points" to="/kinect/depth_registered/points" />
      </node>

    </group>
  </group>

   <include file="$(find pandora_robots_description)/woody/launch/woody_description.launch" />

  <!-- Output selection -->

  <include file="$(find pandora_vision_hole)/launch/pandora_vision_hole.launch">
    <arg name="output" default="screen" />
  </include>

</launch>
